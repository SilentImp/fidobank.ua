var __bind=function(t,i){return function(){return t.apply(i,arguments)}};define(["ScrollController","jquery.scrollTo"],function(t){var i;return i=function(){function i(){this.isCalculatorVisible=__bind(this.isCalculatorVisible,this),this.selectDeposit=__bind(this.selectDeposit,this),this.showCallBackForm=__bind(this.showCallBackForm,this),this.showCalcForm=__bind(this.showCalcForm,this),this.scrollTop=__bind(this.scrollTop,this),this.itype="click",$("html").hasClass("touch")&&(this.itype="touchstart"),this.scrollController=new t,this.visibilityChecked=!1,this.mainCalculator=$(".calculator-forms"),this.callBackForm=$(".callback-form"),this.tabs=this.mainCalculator.find(".tabs"),this.tabNav=this.mainCalculator.find(".tab-navigation"),this.upButton=$(".back-to-top"),this.popup=$(".calculator-popup"),this.popupContent=this.popup.find(".wrapper"),this.detailsButton=this.tabs.find(".monitor .details"),this.calcButton=this.callBackForm.find(".back-to-calculator"),this.tabNav.find("a").on(this.itype,this.selectDeposit),this.detailsButton.on(this.itype,this.showCallBackForm),this.calcButton.on(this.itype,this.showCalcForm),this.upButton.on(this.itype,this.scrollTop),$(window).on("scroll",this.isCalculatorVisible),this.isCalculatorVisible()}return i.prototype.scrollTop=function(t){return t.preventDefault(),this.scrollController.scrollToTop()},i.prototype.showCalcForm=function(t){return t.preventDefault(),this.mainCalculator.show(),this.callBackForm.hide()},i.prototype.showCallBackForm=function(t){return t.preventDefault(),this.mainCalculator.hide(),this.callBackForm.show()},i.prototype.selectDeposit=function(t){var i,s,o;return t.preventDefault(),s=$(t.currentTarget),s.hasClass("current")?void 0:(o=s.attr("href").substr(1),this.tabNav.find(".current").removeClass("current"),s.addClass("current"),i=this.tabs.find("."+o),this.tabs.scrollTo(i,500,{axis:"x"}),this.popupContent.find(">.current").removeClass("current"),this.popupContent.find("."+o).addClass("current"))},i.prototype.isCalculatorVisible=function(){return this.visibilityChecked!==!0?(this.visibilityChecked=!0,this.scrollController.checkIfElementVisible(this.mainCalculator)?(this.upButton.removeClass("visible"),this.popup.removeClass("visible")):(this.upButton.addClass("visible"),this.popup.addClass("visible")),window.setTimeout(function(t){return function(){return t.visibilityChecked=!1}}(this),250)):void 0},i}()});