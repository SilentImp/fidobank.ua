var __bind=function(t,s){return function(){return t.apply(s,arguments)}},__indexOf=[].indexOf||function(t){for(var s=0,i=this.length;i>s;s++)if(s in this&&this[s]===t)return s;return-1};define(["big.js/big","ScrollController","jquery.scrollTo"],function(t,s){var i;return i=function(){function i(){this.isCalculatorVisible=__bind(this.isCalculatorVisible,this),this.selectDeposit=__bind(this.selectDeposit,this),this.showCallBackForm=__bind(this.showCallBackForm,this),this.showCallBackFormUp=__bind(this.showCallBackFormUp,this),this.showCalcForm=__bind(this.showCalcForm,this),this.scrollTop=__bind(this.scrollTop,this),this.recountForm=__bind(this.recountForm,this),this.syncSumm=__bind(this.syncSumm,this),this.syncDropDowns=__bind(this.syncDropDowns,this),this.filterLetter=__bind(this.filterLetter,this),this.keyUp=__bind(this.keyUp,this),this.Big=t,this.enter=13,this.esc=27,this.dash=189,this.ctrl=17,this.cmd=91,this.shift=16,this.alt=18,this.space=32,this.chars=[this.dash,this.space],this.r=82,this.numbers=[48,49,50,51,52,53,54,55,56,57],this.controls=[8,9,45,46,39,37,this.esc,this.ctrl,this.alt,this.shift,this.enter,this.cmd],this.controlsPressed=[],this.itype="click",$("html").hasClass("touch")&&(this.itype="touchstart"),this.scrollController=new s,this.visibilityChecked=!1,this.mainCalculator=$(".calculator-forms"),this.callBackForm=$(".callback-form"),this.tabs=this.mainCalculator.find(".tabs"),this.tabNav=this.mainCalculator.find(".tab-navigation"),this.upButton=$(".back-to-top"),this.popup=$(".calculator-popup"),this.popupContent=this.popup.find(".wrapper"),this.detailsButton=this.tabs.find(".monitor .details"),this.calcButton=this.callBackForm.find(".back-to-calculator"),this.updetails=this.popup.find(".monitor .details"),this.popupMonitor=this.popup.find(".monitor"),this.popupMonitorSumm=this.popupMonitor.find("b"),this.popupMonitorCurrency=this.popupMonitor.find(".currency"),this.popupMonitorPercent=this.popupMonitor.find(".percent"),this.calcMonitor=this.mainCalculator.find(".monitor"),this.calcMonitorSumm=this.calcMonitor.find("b"),this.calcMonitorCurrency=this.calcMonitor.find(".currency"),this.calcMonitorPercent=this.calcMonitor.find(".percent"),this.summ=$("input.summ"),this.summ.on("keyup",this.keyUp),this.summ.on("keydown",this.filterLetter),this.summ.on("keypress",this.syncSumm),this.ddi=$(".drop-down-selector input"),this.ddi.on("change",this.syncDropDowns),this.popup.find("input").on("change",this.recountForm),this.tabs.find("input").on("change",this.recountForm),this.updetails.on(this.itype,this.showCallBackFormUp),this.tabNav.find("a").on(this.itype,this.selectDeposit),this.detailsButton.on(this.itype,this.showCallBackForm),this.calcButton.on(this.itype,this.showCalcForm),this.upButton.on(this.itype,this.scrollTop),this.current=this.tabs.find(">.current"),$(window).on("scroll",this.isCalculatorVisible),this.isCalculatorVisible(),this.recountForm()}return i.prototype.keyUp=function(t){var s;return s=this.controlsPressed.indexOf(t.which),s>-1?this.controlsPressed.splice(s,1):void 0},i.prototype.filterLetter=function(t){var s,i,r,e,o;switch(r=t.which,__indexOf.call(this.controls,r)<0&&(e=t.which,__indexOf.call(this.numbers,e)<0)&&t.which!==this.r&&t.preventDefault(),o=t.which,__indexOf.call(this.controls,o)>=0&&this.controlsPressed.indexOf(t.which)<0&&this.controlsPressed.push(t.which),t.which){case this.r:if(s=this.controlsPressed.indexOf(this.cmd)>-1,i=this.controlsPressed.indexOf(this.ctrl)>-1,!s&&!i)return t.preventDefault();break;case this.esc:return t.preventDefault(),this.summ.blur();case this.enter:return t.preventDefault(),this.summ.blur()}},i.prototype.syncDropDowns=function(t){var s,i,r,e;return i=$(t.currentTarget),r=i.attr("name"),s=i.parents("form"),e=s.attr("data-type"),this.current.find("[name="+r+"][value="+i.val()+"]:not(:checked)").trigger(this.itype),this.popup.find("."+e+" input[name="+r+"][value="+i.val()+"]:not(:checked)").trigger(this.itype)},i.prototype.syncSumm=function(t){var s,i,r,e,o;return i=$(t.currentTarget),e=i.attr("name"),s=i.parents("form"),o=s.attr("data-type"),r=this.current.find("[name="+e+"]"),r.val()!==i.val()&&r.val(i.val()),r=this.popup.find("."+o+" input[name="+e+"]"),r.val()!==i.val()?r.val(i.val()):void 0},i.prototype.recountForm=function(){var t,s,i,r,e,o,a,l;if(l=this.current.attr("data-type"),t=$("."+l),"unity-calculator"===l){switch(o=this.Big(this.current.find(".summ").val()),isNaN(o)&&(o=0),a=this.current.find('[name="loan_term"]:checked').val(),s=this.current.find('[name="loan_currency"]:checked').val()){case"uah":switch(s="ГРН",a){case"1":r=24;break;case"2":r=24;break;case"3":r=25;break;case"6":r=19;break;case"9":r=19.5;break;case"12":r=19.5;break;case"18":r=19;break;case"24":r=19}break;case"usd":switch(s="USD",a){case"1":r=13;break;case"2":r=13;break;case"3":r=13;break;case"6":r=8;break;case"9":r=8;break;case"12":r=9;break;case"18":r=9;break;case"24":r=9}break;case"eur":switch(s="EUR",a){case"1":r=12;break;case"2":r=12;break;case"3":r=12;break;case"6":r=7;break;case"9":r=7;break;case"12":r=8;break;case"18":r=8;break;case"24":r=8}}return this.calcMonitorCurrency.html(s),this.popupMonitorCurrency.html(s),this.calcMonitorPercent.text(r+"%"),this.popupMonitorPercent.text(r+"%"),a=parseInt(a,10),e=o.times(r/100).div(12).times(a).plus(o).toFixed(0),i=parseInt(e.toString().length,10),6>=i?(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.removeClass("very-small")):i>6&&9>i?(this.calcMonitorSumm.addClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.addClass("small"),this.popupMonitorSumm.removeClass("very-small")):(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.addClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.adClass("very-small")),this.calcMonitorSumm.html(e.toString()),this.popupMonitorSumm.html(e.toString())}if("double-guarantee-calculator"===l){switch(o=this.Big(this.current.find(".summ").val()),a=this.current.find('[name="loan_term"]:checked').val()){case"3":r=12;break;case"6":r=7;break;case"9":r=7;break;case"12":r=8}return this.calcMonitorCurrency.html("USD"),this.popupMonitorCurrency.html("USD"),this.calcMonitorPercent.text(r+"%"),this.popupMonitorPercent.text(r+"%"),a=parseInt(a,10),e=o.times(r/100).div(12).times(a).plus(o).toFixed(0),i=parseInt(e.toString().length,10),6>=i?(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.removeClass("very-small")):i>6&&9>i?(this.calcMonitorSumm.addClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.addClass("small"),this.popupMonitorSumm.removeClass("very-small")):(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.addClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.adClass("very-small")),this.calcMonitorSumm.html(e.toString()),this.popupMonitorSumm.html(e.toString())}return"plastic-fantasy-calculator"===l?(o=this.Big(this.current.find(".summ").val()),r=o.lt(1e3)?8:20,this.calcMonitorPercent.html(r+"%"),this.popupMonitorPercent.html(r+"%"),this.calcMonitorCurrency.html("ГРН"),this.popupMonitorCurrency.html("ГРН"),e=o.times(r/100).plus(o).toFixed(0),i=parseInt(e.toString().length,10),6>=i?(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.removeClass("very-small")):i>6&&9>i?(this.calcMonitorSumm.addClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.addClass("small"),this.popupMonitorSumm.removeClass("very-small")):(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.addClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.adClass("very-small")),this.calcMonitorSumm.html(e.toString()),this.popupMonitorSumm.html(e.toString())):void 0},i.prototype.scrollTop=function(t){return t.preventDefault(),this.scrollController.scrollToTop()},i.prototype.showCalcForm=function(t){return t.preventDefault(),this.mainCalculator.show(),this.callBackForm.hide()},i.prototype.showCallBackFormUp=function(t){return t.preventDefault(),this.mainCalculator.hide(),this.callBackForm.show(),this.scrollController.scrollToElement(this.callBackForm)},i.prototype.showCallBackForm=function(t){return t.preventDefault(),this.mainCalculator.hide(),this.callBackForm.show()},i.prototype.selectDeposit=function(t){var s,i,r;return t.preventDefault(),i=$(t.currentTarget),i.hasClass("current")?void 0:(r=i.attr("href").substr(1),this.tabNav.find(".current").removeClass("current"),i.addClass("current"),s=this.tabs.find("."+r),this.tabs.find(">.current").removeClass("current"),this.tabs.find(">."+r).addClass("current"),this.popupContent.find(">.current").removeClass("current"),this.popupContent.find(">."+r).addClass("current"),this.current=s,this.current.addClass("current"),this.recountForm())},i.prototype.isCalculatorVisible=function(){return this.visibilityChecked!==!0?(this.visibilityChecked=!0,this.scrollController.checkIfElementVisible(this.mainCalculator)?(this.upButton.removeClass("visible"),this.popup.removeClass("visible")):(this.upButton.addClass("visible"),this.popup.addClass("visible")),window.setTimeout(function(t){return function(){return t.visibilityChecked=!1}}(this),250)):void 0},i}()});