var __bind=function(t,s){return function(){return t.apply(s,arguments)}};define(["big.js/big","ScrollController","jquery.maskedinput/jquery.maskedinput.min","cookies"],function(t,s){var e;return e=function(){function e(){this.isCalculatorVisible=__bind(this.isCalculatorVisible,this),this.selectDeposit=__bind(this.selectDeposit,this),this.showCallBackForm=__bind(this.showCallBackForm,this),this.showCallBackFormUp=__bind(this.showCallBackFormUp,this),this.message24=__bind(this.message24,this),this.message22=__bind(this.message22,this),this.message19=__bind(this.message19,this),this.message18=__bind(this.message18,this),this.message17=__bind(this.message17,this),this.message16=__bind(this.message16,this),this.message15=__bind(this.message15,this),this.message11=__bind(this.message11,this),this.message6=__bind(this.message6,this),this.getData=__bind(this.getData,this),this.showCalcForm=__bind(this.showCalcForm,this),this.scrollTop=__bind(this.scrollTop,this),this.recountForm=__bind(this.recountForm,this),this.syncSumm=__bind(this.syncSumm,this),this.syncDropDowns=__bind(this.syncDropDowns,this),this.saveClick=__bind(this.saveClick,this);var e;this.Big=t,this.delayTime=250,this.itype="click",$("html").hasClass("touch")&&(this.itype="touchstart"),e=$("header .blocker"),e.on(this.itype,this.saveClick),e.on(this.itype,this.message22),this.scrollController=new s,this.visibilityChecked=!1,this.mainCalculator=$(".calculator-forms"),this.callBackForm=$(".callback-form"),this.tabs=this.mainCalculator.find(".tabs"),this.tabNav=this.mainCalculator.find(".tab-navigation"),this.upButton=$(".back-to-top"),this.popup=$(".calculator-popup"),this.popupContent=this.popup.find(".wrapper"),this.detailsButton=this.tabs.find(".monitor .details"),this.calcButton=this.callBackForm.find(".back-to-calculator"),this.updetails=this.popup.find(".monitor .details"),this.popupMonitor=this.popup.find(".monitor"),this.popupMonitorSumm=this.popupMonitor.find("b"),this.popupMonitorCurrency=this.popupMonitor.find(".currency"),this.popupMonitorPercent=this.popupMonitor.find(".percent"),this.calcMonitor=this.mainCalculator.find(".monitor"),this.calcMonitorSumm=this.calcMonitor.find("b"),this.calcMonitorCurrency=this.calcMonitor.find(".currency"),this.calcMonitorPercent=this.calcMonitor.find(".percent"),this.summ=$("input.summ"),this.summ.mask("9?9999999",{placeholder:""}),this.summ.on("keypress",this.syncSumm),this.ddi=$(".drop-down-selector input"),this.ddi.on("change",this.syncDropDowns),this.popup.find("input").on("change",this.recountForm),this.tabs.find("input").on("change",this.recountForm),this.updetails.on(this.itype,this.showCallBackFormUp),this.updetails.on(this.itype,this.message18),this.updetails.on(this.itype,this.message11),this.tabNav.find("a").on(this.itype,this.selectDeposit),this.detailsButton.on(this.itype,this.showCallBackForm),this.detailsButton.on(this.itype,this.message16),this.detailsButton.on(this.itype,this.message6),this.detailsButton.on(this.itype,this.message17),this.calcButton.on(this.itype,this.showCalcForm),this.calcButton.on(this.itype,this.message24),this.upButton.on(this.itype,this.scrollTop),this.current=this.tabs.find(">.current"),$(window).on("scroll",this.isCalculatorVisible),this.isCalculatorVisible(),this.recountForm(),$(window).on("scrolled",this.isCalculatorVisible),$("form:not(.callback-form)").on("submit",function(t){return function(s){return s.preventDefault(),t.recountForm()}}(this))}return e.prototype.saveClick=function(t){var s;$(t.currentTarget.parentNode).addClass("clicked"),$(t.currentTarget).fadeOut();try{return _gaq.push(["_trackEvent","Open","Success"," "])}catch(e){return s=e,console.log(s)}},e.prototype.syncDropDowns=function(t){var s,e,i,o;return e=$(t.currentTarget),i=e.attr("name"),s=e.parents("form"),o=s.attr("data-type"),this.current.find("[name="+i+"][value="+e.val()+"]:not(:checked)").trigger(this.itype),this.popup.find("."+o+" input[name="+i+"][value="+e.val()+"]:not(:checked)").trigger(this.itype)},e.prototype.syncSumm=function(t){var s,e,i,o,a;return e=$(t.currentTarget),o=e.attr("name"),s=e.parents("form"),a=s.attr("data-type"),i=this.current.find("[name="+o+"]"),i.val()!==e.val()&&i.val(e.val()),i=this.popup.find("."+a+" input[name="+o+"]"),i.val()!==e.val()?i.val(e.val()):void 0},e.prototype.recountForm=function(){var t,s,e,i,o,a,r,n;if(n=this.current.attr("data-type"),t=$("."+n),"unity-calculator"===n){switch(a=this.Big(this.current.find(".summ").val()),isNaN(a)&&(a=0),r=this.current.find('[name="loan_term"]:checked').val(),s=this.current.find('[name="loan_currency"]:checked').val()){case"uah":switch(s="ГРН",r){case"1":i=24;break;case"2":i=24;break;case"3":i=25;break;case"6":i=19;break;case"9":i=19.5;break;case"12":i=19.5;break;case"18":i=19;break;case"24":i=19}break;case"usd":switch(s="USD",r){case"1":i=13;break;case"2":i=13;break;case"3":i=13;break;case"6":i=8;break;case"9":i=8;break;case"12":i=9;break;case"18":i=9;break;case"24":i=9}break;case"eur":switch(s="EUR",r){case"1":i=12;break;case"2":i=12;break;case"3":i=12;break;case"6":i=7;break;case"9":i=7;break;case"12":i=8;break;case"18":i=8;break;case"24":i=8}}return this.calcMonitorCurrency.html(s),this.popupMonitorCurrency.html(s),this.calcMonitorPercent.text(i+"%"),this.popupMonitorPercent.text(i+"%"),r=parseInt(r,10),o=a.times(i/100).div(12).times(r).plus(a).toFixed(0),e=parseInt(o.toString().length,10),6>=e?(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.removeClass("very-small")):e>6&&9>e?(this.calcMonitorSumm.addClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.addClass("small"),this.popupMonitorSumm.removeClass("very-small")):(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.addClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.adClass("very-small")),this.calcMonitorSumm.html(o.toString()),this.popupMonitorSumm.html(o.toString())}if("double-guarantee-calculator"===n){switch(a=this.Big(this.current.find(".summ").val()),r=this.current.find('[name="loan_term"]:checked').val()){case"3":i=12;break;case"6":i=7;break;case"9":i=7;break;case"12":i=8}return this.calcMonitorCurrency.html("USD"),this.popupMonitorCurrency.html("USD"),this.calcMonitorPercent.text(i+"%"),this.popupMonitorPercent.text(i+"%"),r=parseInt(r,10),o=a.times(i/100).div(12).times(r).plus(a).toFixed(0),e=parseInt(o.toString().length,10),6>=e?(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.removeClass("very-small")):e>6&&9>e?(this.calcMonitorSumm.addClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.addClass("small"),this.popupMonitorSumm.removeClass("very-small")):(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.addClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.adClass("very-small")),this.calcMonitorSumm.html(o.toString()),this.popupMonitorSumm.html(o.toString())}return"plastic-fantasy-calculator"===n?(a=this.Big(this.current.find(".summ").val()),i=a.lt(1e3)?8:20,this.calcMonitorPercent.html(i+"%"),this.popupMonitorPercent.html(i+"%"),this.calcMonitorCurrency.html("ГРН"),this.popupMonitorCurrency.html("ГРН"),o=a.times(i/100).plus(a).toFixed(0),e=parseInt(o.toString().length,10),6>=e?(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.removeClass("very-small")):e>6&&9>e?(this.calcMonitorSumm.addClass("small"),this.calcMonitorSumm.removeClass("very-small"),this.popupMonitorSumm.addClass("small"),this.popupMonitorSumm.removeClass("very-small")):(this.calcMonitorSumm.removeClass("small"),this.calcMonitorSumm.addClass("very-small"),this.popupMonitorSumm.removeClass("small"),this.popupMonitorSumm.adClass("very-small")),this.calcMonitorSumm.html(o.toString()),this.popupMonitorSumm.html(o.toString())):void 0},e.prototype.scrollTop=function(t){return t.preventDefault(),this.scrollController.scrollToTop()},e.prototype.showCalcForm=function(t){return t.preventDefault(),this.mainCalculator.show(),this.callBackForm.hide(),this.widget.find(".message").show(),this.callBackForm.find(".ready-to-send").show(),this.callBackForm.find(".message-was-send").hide()},e.prototype.getData=function(){var t,s,e,i,o,a;switch(s=$(".calculator-forms form.current"),a=s.attr("data-type")){case"unity-calculator":e="Депозит «Єдність»",o=s.find('[name="loan_term"]:checked').val(),t=s.find('[name="loan_currency"]:checked').val();break;case"double-guarantee-calculator":e="Депозит «Подвійна гарантія»",o=s.find('[name="loan_term"]:checked').val(),t="USD";break;case"plastic-fantasy-calculator":e="Депозит «Пластик Фантастик»",o=12,t="UAH"}return i=s.find(".summ").val(),[e,o,i,t]},e.prototype.message6=function(){var t,s;t=this.getData();try{return ga("send","event","Form","More","#"+t[2]+" "+t[3]+" - "+t[1]+" Month#")}catch(e){return s=e,console.log(s)}},e.prototype.message11=function(){var t,s;t=this.getData();try{return ga("send","event","Header","More","#"+t[2]+" "+t[3]+" - "+t[1]+" Month#")}catch(e){return s=e,console.log(s)}},e.prototype.message15=function(){var t,s;t=this.getData();try{return ga("send","event","Buttons CTR","More Form","Impression")}catch(e){return s=e,console.log(s)}},e.prototype.message16=function(){var t,s;t=this.getData();try{return ga("send","event","Buttons CTR","More Form","Click")}catch(e){return s=e,console.log(s)}},e.prototype.message17=function(){var t,s;t=this.getData();try{return ga("send","event","Buttons CTR","More Header","Impression")}catch(e){return s=e,console.log(s)}},e.prototype.message18=function(){var t,s;t=this.getData();try{return ga("send","event","Buttons CTR","More Header","Click")}catch(e){return s=e,console.log(s)}},e.prototype.message19=function(){var t,s;t=this.getData();try{return ga("send","event","Buttons CTR","Book a Call","Impression")}catch(e){return s=e,console.log(s)}},e.prototype.message22=function(){var t,s;t=this.getData();try{return ga("send","event","Form","Calculator","User clicks on calculator button")}catch(e){return s=e,console.log(s)}},e.prototype.message24=function(){var t,s;t=this.getData();try{return ga("send","event","Contact","Show Number","User clicks on button show number")}catch(e){return s=e,console.log(s)}},e.prototype.showCallBackFormUp=function(t){return t.preventDefault(),this.mainCalculator.hide(),this.callBackForm.show(),this.scrollController.scrollToElement(this.callBackForm)},e.prototype.showCallBackForm=function(t){return t.preventDefault(),this.mainCalculator.hide(),this.callBackForm.show()},e.prototype.selectDeposit=function(t){var s,e,i;return t.preventDefault(),e=$(t.currentTarget),e.hasClass("current")?void 0:(i=e.attr("href").substr(1),this.tabNav.find(".current").removeClass("current"),e.addClass("current"),s=this.tabs.find("."+i),this.tabs.find(">.current").removeClass("current"),this.tabs.find(">."+i).addClass("current"),this.popupContent.find(">.current").removeClass("current"),this.popupContent.find(">."+i).addClass("current"),this.current=s,this.current.addClass("current"),this.recountForm())},e.prototype.isCalculatorVisible=function(){return this.visibilityChecked!==!0?(this.visibilityChecked=!0,this.scrollController.checkIfElementVisible(this.detailsButton)&&this.message15(),this.scrollController.checkIfElementVisible(this.mainCalculator)?(this.upButton.removeClass("visible"),this.popup.removeClass("visible")):(this.upButton.addClass("visible"),this.popup.addClass("visible"),this.message17()),window.setTimeout(function(t){return function(){return t.visibilityChecked=!1}}(this),this.delayTime)):void 0},e}()});
//# sourceMappingURL=CalculatorController.js.map